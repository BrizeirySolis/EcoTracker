import{a as O}from"./chunk-W4AZVQAT.js";import{a as N,c as T,d as q,f as k,h as R,i as A,j as L,q as Q,r as j,t as B}from"./chunk-FMM5U7V5.js";import{a as D}from"./chunk-ZK23IUWG.js";import{$ as W,G as s,Ha as V,I as M,J as y,N as u,Q as c,R as v,S as t,T as i,U as h,X as x,Y as w,Z as _,_ as F,aa as E,ba as d,ca as l,ga as b,ha as C,ia as S,x as g,xa as I,y as f,za as P}from"./chunk-VNDPJNBL.js";var G=["waterForm"];function Y(n,a){n&1&&(t(0,"div"),l(1,"El consumo de agua es obligatorio"),i())}function H(n,a){n&1&&(t(0,"div"),l(1,"El consumo debe ser mayor que cero"),i())}function J(n,a){if(n&1&&(t(0,"div",19),u(1,Y,2,0,"div",20)(2,H,2,0,"div",20),i()),n&2){_();let e=d(13);s(),c("ngIf",e.errors==null?null:e.errors.required),s(),c("ngIf",e.value<=0&&!(e.errors!=null&&e.errors.required))}}function K(n,a){n&1&&(t(0,"div"),l(1,"La fecha es obligatoria"),i())}function U(n,a){if(n&1&&(t(0,"div",19),u(1,K,2,0,"div",20),i()),n&2){_();let e=d(21);s(),c("ngIf",e.errors==null?null:e.errors.required)}}function X(n,a){n&1&&(t(0,"div"),l(1,"El costo es obligatorio"),i())}function Z(n,a){n&1&&(t(0,"div"),l(1,"El costo debe ser un valor positivo"),i())}function $(n,a){if(n&1&&(t(0,"div",19),u(1,X,2,0,"div",20)(2,Z,2,0,"div",20),i()),n&2){_();let e=d(29);s(),c("ngIf",e.errors==null?null:e.errors.required),s(),c("ngIf",e.value<0&&!(e.errors!=null&&e.errors.required))}}var z=class n{constructor(a,e){this.consumptionService=a;this.router=e}waterForm;consumption={liters:0,date:new Date,cost:0};consumptionDate=this.formatDate(new Date);isSubmitted=!1;saveConsumption(a){this.isSubmitted=!0,!(a.invalid||this.consumption.liters<=0||this.consumption.cost<0)&&(this.consumption.date=new Date(this.consumptionDate),this.consumptionService.saveWaterConsumption(this.consumption).subscribe({next:()=>{this.router.navigate(["/habitos"])},error:e=>{console.error("Error saving consumption:",e)}}))}cancel(){this.router.navigate(["/habitos"])}formatDate(a){let e=a.getFullYear(),o=String(a.getMonth()+1).padStart(2,"0"),m=String(a.getDate()).padStart(2,"0");return`${e}-${o}-${m}`}static \u0275fac=function(e){return new(e||n)(M(O),M(V))};static \u0275cmp=y({type:n,selectors:[["app-water-form"]],viewQuery:function(e,o){if(e&1&&F(G,5),e&2){let m;W(m=E())&&(o.waterForm=m.first)}},decls:36,vars:12,consts:[["waterForm","ngForm"],["consumptionInput","ngModel"],["dateInput","ngModel"],["costInput","ngModel"],[1,"container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["for","consumption"],[1,"required"],["type","number","id","consumption","name","consumption","required","","min","0.01",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","date"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","cost"],["type","number","id","cost","name","cost","required","","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"button-group"],["type","submit",1,"btn-save"],["type","button",1,"btn-cancel",3,"click"],[1,"error-message"],[4,"ngIf"]],template:function(e,o){if(e&1){let m=x();h(0,"app-navbar"),t(1,"div",4)(2,"div",5)(3,"h2"),l(4,"Agua"),i(),t(5,"form",6,0),w("ngSubmit",function(){g(m);let r=d(6);return f(o.saveConsumption(r))}),t(7,"div",7)(8,"label",8),l(9,"Agua consumida (m3) "),t(10,"span",9),l(11,"*"),i()(),t(12,"input",10,1),S("ngModelChange",function(r){return g(m),C(o.consumption.liters,r)||(o.consumption.liters=r),f(r)}),i(),u(14,J,3,2,"div",11),i(),t(15,"div",7)(16,"label",12),l(17,"Fecha "),t(18,"span",9),l(19,"*"),i()(),t(20,"input",13,2),S("ngModelChange",function(r){return g(m),C(o.consumptionDate,r)||(o.consumptionDate=r),f(r)}),i(),u(22,U,2,1,"div",11),i(),t(23,"div",7)(24,"label",14),l(25,"Costo "),t(26,"span",9),l(27,"*"),i()(),t(28,"input",15,3),S("ngModelChange",function(r){return g(m),C(o.consumption.cost,r)||(o.consumption.cost=r),f(r)}),i(),u(30,$,3,2,"div",11),i(),t(31,"div",16)(32,"button",17),l(33,"Guardar"),i(),t(34,"button",18),w("click",function(){return g(m),f(o.cancel())}),l(35,"Cancelar"),i()()()()()}if(e&2){let m=d(13),p=d(21),r=d(29);s(12),v("is-invalid",o.isSubmitted&&(m.invalid||m.value<=0)),b("ngModel",o.consumption.liters),s(2),c("ngIf",o.isSubmitted&&(m.invalid||m.value<=0)),s(6),v("is-invalid",o.isSubmitted&&p.invalid),b("ngModel",o.consumptionDate),s(2),c("ngIf",o.isSubmitted&&p.invalid),s(6),v("is-invalid",o.isSubmitted&&(r.invalid||r.value<0)),b("ngModel",o.consumption.cost),s(2),c("ngIf",o.isSubmitted&&(r.invalid||r.value<0))}},dependencies:[P,I,B,A,N,L,T,q,j,Q,R,k,D],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.form-container[_ngcontent-%COMP%]{background-color:#8ae68a;border-radius:12px;padding:30px;margin-top:30px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:24px;background-color:#fff;font-size:1rem}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{padding:12px 40px;border:none;border-radius:24px;font-weight:700;cursor:pointer;transition:background-color .3s}.btn-save[_ngcontent-%COMP%]{background-color:#00833c;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background-color:#e53935;color:#fff}.btn-save[_ngcontent-%COMP%]:hover{background-color:#006c32}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#c62828}.required[_ngcontent-%COMP%]{color:#e53935}.is-invalid[_ngcontent-%COMP%]{border:1px solid #e53935!important;background-color:#ffebee}.error-message[_ngcontent-%COMP%]{color:#e53935;font-size:.875rem;margin-top:4px;margin-left:12px}"]})};export{z as WaterFormComponent};
