import{a as O}from"./chunk-W4AZVQAT.js";import{a as N,c as T,d as q,f as W,h as L,i as R,j as Q,q as j,r as z,t as B}from"./chunk-FMM5U7V5.js";import{a as D}from"./chunk-ZK23IUWG.js";import{$ as F,G as m,Ha as V,I as E,J as M,N as u,Q as s,R as v,S as t,T as o,U as w,X as h,Y as S,Z as _,_ as x,aa as I,ba as d,ca as l,ga as y,ha as b,ia as C,x as g,xa as P,y as f,za as k}from"./chunk-VNDPJNBL.js";var G=["electricityForm"];function Y(i,a){i&1&&(t(0,"div"),l(1,"El consumo de electricidad es obligatorio"),o())}function H(i,a){i&1&&(t(0,"div"),l(1,"El consumo debe ser mayor que cero"),o())}function J(i,a){if(i&1&&(t(0,"div",19),u(1,Y,2,0,"div",20)(2,H,2,0,"div",20),o()),i&2){_();let e=d(13);m(),s("ngIf",e.errors==null?null:e.errors.required),m(),s("ngIf",e.value<=0&&!(e.errors!=null&&e.errors.required))}}function K(i,a){i&1&&(t(0,"div"),l(1,"La fecha es obligatoria"),o())}function U(i,a){if(i&1&&(t(0,"div",19),u(1,K,2,0,"div",20),o()),i&2){_();let e=d(21);m(),s("ngIf",e.errors==null?null:e.errors.required)}}function X(i,a){i&1&&(t(0,"div"),l(1,"El costo es obligatorio"),o())}function Z(i,a){i&1&&(t(0,"div"),l(1,"El costo debe ser un valor positivo"),o())}function $(i,a){if(i&1&&(t(0,"div",19),u(1,X,2,0,"div",20)(2,Z,2,0,"div",20),o()),i&2){_();let e=d(29);m(),s("ngIf",e.errors==null?null:e.errors.required),m(),s("ngIf",e.value<0&&!(e.errors!=null&&e.errors.required))}}var A=class i{constructor(a,e){this.consumptionService=a;this.router=e}electricityForm;consumption={kilowatts:0,date:new Date,cost:0};consumptionDate=this.formatDate(new Date);isSubmitted=!1;saveConsumption(a){this.isSubmitted=!0,!(a.invalid||this.consumption.kilowatts<=0||this.consumption.cost<0)&&(this.consumption.date=new Date(this.consumptionDate),this.consumptionService.saveElectricityConsumption(this.consumption).subscribe({next:()=>{this.router.navigate(["/habitos"])},error:e=>{console.error("Error saving consumption:",e)}}))}cancel(){this.router.navigate(["/habitos"])}formatDate(a){let e=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),c=String(a.getDate()).padStart(2,"0");return`${e}-${n}-${c}`}static \u0275fac=function(e){return new(e||i)(E(O),E(V))};static \u0275cmp=M({type:i,selectors:[["app-electricity-form"]],viewQuery:function(e,n){if(e&1&&x(G,5),e&2){let c;F(c=I())&&(n.electricityForm=c.first)}},decls:36,vars:12,consts:[["electricityForm","ngForm"],["consumptionInput","ngModel"],["dateInput","ngModel"],["costInput","ngModel"],[1,"container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["for","consumption"],[1,"required"],["type","number","id","consumption","name","consumption","required","","min","0.01",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","date"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","cost"],["type","number","id","cost","name","cost","required","","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"button-group"],["type","submit",1,"btn-save"],["type","button",1,"btn-cancel",3,"click"],[1,"error-message"],[4,"ngIf"]],template:function(e,n){if(e&1){let c=h();w(0,"app-navbar"),t(1,"div",4)(2,"div",5)(3,"h2"),l(4,"Luz"),o(),t(5,"form",6,0),S("ngSubmit",function(){g(c);let r=d(6);return f(n.saveConsumption(r))}),t(7,"div",7)(8,"label",8),l(9,"Electricidad consumida "),t(10,"span",9),l(11,"*"),o()(),t(12,"input",10,1),C("ngModelChange",function(r){return g(c),b(n.consumption.kilowatts,r)||(n.consumption.kilowatts=r),f(r)}),o(),u(14,J,3,2,"div",11),o(),t(15,"div",7)(16,"label",12),l(17,"Fecha "),t(18,"span",9),l(19,"*"),o()(),t(20,"input",13,2),C("ngModelChange",function(r){return g(c),b(n.consumptionDate,r)||(n.consumptionDate=r),f(r)}),o(),u(22,U,2,1,"div",11),o(),t(23,"div",7)(24,"label",14),l(25,"Costo "),t(26,"span",9),l(27,"*"),o()(),t(28,"input",15,3),C("ngModelChange",function(r){return g(c),b(n.consumption.cost,r)||(n.consumption.cost=r),f(r)}),o(),u(30,$,3,2,"div",11),o(),t(31,"div",16)(32,"button",17),l(33,"Guardar"),o(),t(34,"button",18),S("click",function(){return g(c),f(n.cancel())}),l(35,"Cancelar"),o()()()()()}if(e&2){let c=d(13),p=d(21),r=d(29);m(12),v("is-invalid",n.isSubmitted&&(c.invalid||c.value<=0)),y("ngModel",n.consumption.kilowatts),m(2),s("ngIf",n.isSubmitted&&(c.invalid||c.value<=0)),m(6),v("is-invalid",n.isSubmitted&&p.invalid),y("ngModel",n.consumptionDate),m(2),s("ngIf",n.isSubmitted&&p.invalid),m(6),v("is-invalid",n.isSubmitted&&(r.invalid||r.value<0)),y("ngModel",n.consumption.cost),m(2),s("ngIf",n.isSubmitted&&(r.invalid||r.value<0))}},dependencies:[k,P,B,R,N,Q,T,q,z,j,L,W,D],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.form-container[_ngcontent-%COMP%]{background-color:#8ae68a;border-radius:12px;padding:30px;margin-top:30px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:24px;background-color:#fff;font-size:1rem}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{padding:12px 40px;border:none;border-radius:24px;font-weight:700;cursor:pointer;transition:background-color .3s}.btn-save[_ngcontent-%COMP%]{background-color:#00833c;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background-color:#e53935;color:#fff}.btn-save[_ngcontent-%COMP%]:hover{background-color:#006c32}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#c62828}.required[_ngcontent-%COMP%]{color:#e53935}.is-invalid[_ngcontent-%COMP%]{border:1px solid #e53935!important;background-color:#ffebee}.error-message[_ngcontent-%COMP%]{color:#e53935;font-size:.875rem;margin-top:4px;margin-left:12px}"]})};export{A as ElectricityFormComponent};
