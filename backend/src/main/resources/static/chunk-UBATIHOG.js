import{a as D}from"./chunk-UDVDMQPM.js";import"./chunk-DMCUYUFQ.js";import{a as N,c as q,d as W,f as A,h as L,i as B,j as z,n as R,o as Q,p as j,q as U,r as G,t as H}from"./chunk-NX5UWNHD.js";import{a as V}from"./chunk-HPUDPAOB.js";import"./chunk-EENQT4EC.js";import{$ as t,A as g,B as f,Ia as I,L as p,N as M,O as T,Pa as P,S as c,V as m,X as v,Za as O,_ as e,aa as x,da as w,ea as h,fa as _,ha as F,ia as E,ja as k,ka as d,la as i,pa as b,qa as C,ra as S}from"./chunk-HBL3S35I.js";var Y=["transportForm"];function J(r,l){r&1&&(e(0,"div"),i(1,"Los kil\xF3metros recorridos son obligatorios"),t())}function X(r,l){r&1&&(e(0,"div"),i(1,"Los kil\xF3metros deben ser mayores que cero"),t())}function Z(r,l){if(r&1&&(e(0,"div",28),c(1,J,2,0,"div",29)(2,X,2,0,"div",29),t()),r&2){_();let n=d(13);p(),m("ngIf",n.errors==null?null:n.errors.required),p(),m("ngIf",n.value<=0&&!(n.errors!=null&&n.errors.required))}}function $(r,l){r&1&&(e(0,"div"),i(1,"El tipo de transporte es obligatorio"),t())}function ee(r,l){if(r&1&&(e(0,"div",28),c(1,$,2,0,"div",29),t()),r&2){_();let n=d(21);p(),m("ngIf",n.errors==null?null:n.errors.required)}}function te(r,l){r&1&&(e(0,"div"),i(1,"La fecha es obligatoria"),t())}function ne(r,l){if(r&1&&(e(0,"div",28),c(1,te,2,0,"div",29),t()),r&2){_();let n=d(41);p(),m("ngIf",n.errors==null?null:n.errors.required)}}function re(r,l){r&1&&(e(0,"div"),i(1,"El costo es obligatorio"),t())}function oe(r,l){r&1&&(e(0,"div"),i(1,"El costo debe ser un valor positivo"),t())}function ie(r,l){if(r&1&&(e(0,"div",28),c(1,re,2,0,"div",29)(2,oe,2,0,"div",29),t()),r&2){_();let n=d(49);p(),m("ngIf",n.errors==null?null:n.errors.required),p(),m("ngIf",n.value<0&&!(n.errors!=null&&n.errors.required))}}var K=class r{constructor(l,n){this.consumptionService=l;this.router=n}transportForm;transport={kilometers:0,transportType:"car",date:new Date,cost:0};transportDate=this.formatDate(new Date);isSubmitted=!1;saveTransport(l){this.isSubmitted=!0,!(l.invalid||this.transport.kilometers<=0||this.transport.cost<0)&&(this.transport.date=new Date(this.transportDate),this.consumptionService.saveTransportUsage(this.transport).subscribe({next:()=>{this.router.navigate(["/habitos"])},error:n=>{console.error("Error saving transport usage:",n)}}))}cancel(){this.router.navigate(["/habitos"])}formatDate(l){let n=l.getFullYear(),o=String(l.getMonth()+1).padStart(2,"0"),s=String(l.getDate()).padStart(2,"0");return`${n}-${o}-${s}`}static \u0275fac=function(n){return new(n||r)(M(D),M(O))};static \u0275cmp=T({type:r,selectors:[["app-transport-form"]],viewQuery:function(n,o){if(n&1&&F(Y,5),n&2){let s;E(s=k())&&(o.transportForm=s.first)}},decls:56,vars:16,consts:[["transportForm","ngForm"],["kilometersInput","ngModel"],["typeInput","ngModel"],["dateInput","ngModel"],["costInput","ngModel"],[1,"container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["for","kilometers"],[1,"required"],["type","number","id","kilometers","name","kilometers","required","","min","0.01",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","type"],["id","type","name","type","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","car"],["value","bus"],["value","bicycle"],["value","walk"],["value","other"],["for","date"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","cost"],["type","number","id","cost","name","cost","required","","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"button-group"],["type","submit",1,"btn-save"],["type","button",1,"btn-cancel",3,"click"],[1,"error-message"],[4,"ngIf"]],template:function(n,o){if(n&1){let s=w();x(0,"app-navbar"),e(1,"div",5)(2,"div",6)(3,"h2"),i(4,"Transporte"),t(),e(5,"form",7,0),h("ngSubmit",function(){g(s);let a=d(6);return f(o.saveTransport(a))}),e(7,"div",8)(8,"label",9),i(9,"Kil\xF3metros recorridos "),e(10,"span",10),i(11,"*"),t()(),e(12,"input",11,1),S("ngModelChange",function(a){return g(s),C(o.transport.kilometers,a)||(o.transport.kilometers=a),f(a)}),t(),c(14,Z,3,2,"div",12),t(),e(15,"div",8)(16,"label",13),i(17,"Tipo de transporte "),e(18,"span",10),i(19,"*"),t()(),e(20,"select",14,2),S("ngModelChange",function(a){return g(s),C(o.transport.transportType,a)||(o.transport.transportType=a),f(a)}),e(22,"option",15),i(23,"Seleccionar tipo de transporte"),t(),e(24,"option",16),i(25,"Autom\xF3vil"),t(),e(26,"option",17),i(27,"Autob\xFAs"),t(),e(28,"option",18),i(29,"Bicicleta"),t(),e(30,"option",19),i(31,"Caminando"),t(),e(32,"option",20),i(33,"Otro"),t()(),c(34,ee,2,1,"div",12),t(),e(35,"div",8)(36,"label",21),i(37,"Fecha "),e(38,"span",10),i(39,"*"),t()(),e(40,"input",22,3),S("ngModelChange",function(a){return g(s),C(o.transportDate,a)||(o.transportDate=a),f(a)}),t(),c(42,ne,2,1,"div",12),t(),e(43,"div",8)(44,"label",23),i(45,"Costo (solo si se ha cargado combustible o utiliz\xF3 el transporte p\xFAblico) "),e(46,"span",10),i(47,"*"),t()(),e(48,"input",24,4),S("ngModelChange",function(a){return g(s),C(o.transport.cost,a)||(o.transport.cost=a),f(a)}),t(),c(50,ie,3,2,"div",12),t(),e(51,"div",25)(52,"button",26),i(53,"Guardar"),t(),e(54,"button",27),h("click",function(){return g(s),f(o.cancel())}),i(55,"Cancelar"),t()()()()()}if(n&2){let s=d(13),u=d(21),a=d(41),y=d(49);p(12),v("is-invalid",o.isSubmitted&&(s.invalid||s.value<=0)),b("ngModel",o.transport.kilometers),p(2),m("ngIf",o.isSubmitted&&(s.invalid||s.value<=0)),p(6),v("is-invalid",o.isSubmitted&&u.invalid),b("ngModel",o.transport.transportType),p(14),m("ngIf",o.isSubmitted&&u.invalid),p(6),v("is-invalid",o.isSubmitted&&a.invalid),b("ngModel",o.transportDate),p(2),m("ngIf",o.isSubmitted&&a.invalid),p(6),v("is-invalid",o.isSubmitted&&(y.invalid||y.value<0)),b("ngModel",o.transport.cost),p(2),m("ngIf",o.isSubmitted&&(y.invalid||y.value<0))}},dependencies:[P,I,H,B,Q,j,N,z,R,q,W,G,U,L,A,V],styles:[`.container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.form-container[_ngcontent-%COMP%]{background-color:#8ae68a;border-radius:12px;padding:30px;margin-top:30px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:24px;background-color:#fff;font-size:1rem}select.form-control[_ngcontent-%COMP%]{appearance:none;background-image:url('data:image/svg+xml;utf8,<svg fill="black" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');background-repeat:no-repeat;background-position:right 12px center}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{padding:12px 40px;border:none;border-radius:24px;font-weight:700;cursor:pointer;transition:background-color .3s}.btn-save[_ngcontent-%COMP%]{background-color:#00833c;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background-color:#e53935;color:#fff}.btn-save[_ngcontent-%COMP%]:hover{background-color:#006c32}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#c62828}.required[_ngcontent-%COMP%]{color:#e53935}.is-invalid[_ngcontent-%COMP%]{border:1px solid #e53935!important;background-color:#ffebee}.error-message[_ngcontent-%COMP%]{color:#e53935;font-size:.875rem;margin-top:4px;margin-left:12px}`]})};export{K as TransportFormComponent};
