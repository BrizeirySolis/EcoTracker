import{a as le,b as ce,c as me}from"./chunk-5EO3PGLV.js";import{a as H,b as I,c as Q,d as W,e as X,g as Y,i as Z,j as J,k as K,l as ee,m as te,n as ie,o as oe,p as ne,s as re,u as ae}from"./chunk-SN6VXKO3.js";import{a as $}from"./chunk-QHZEOANC.js";import{$ as L,B as k,E as N,Ea as q,F as a,Ga as j,H as S,Ha as z,I as F,M as d,O as V,P as l,Q as v,R as r,S as n,T as p,W as h,X as _,Y as s,Z as D,_ as U,aa as G,ba as c,ca as E,da as C,ja as A,l as M,v as B,va as R,w as u,wa as w,x as f,y as b,ya as P,z as y}from"./chunk-LRAL7NZY.js";var fe=["fileInput"];function _e(i,t){if(i&1){let e=h();r(0,"div",5),b(),r(1,"svg",6),p(2,"path",7)(3,"line",8)(4,"line",9)(5,"circle",10)(6,"path",11),n(),y(),r(7,"p",12),c(8," Arrastra y suelta una imagen aqu\xED"),p(9,"br"),r(10,"span"),c(11,"o"),n()(),r(12,"button",13),_("click",function(){u(e);let m=G(15);return f(m.click())}),c(13," Seleccionar imagen "),n(),r(14,"input",14,0),_("change",function(m){u(e);let g=s();return f(g.onFileSelected(m))}),n()()}i&2&&(a(14),V("aria-label","Seleccionar imagen"))}function ve(i,t){if(i&1){let e=h();r(0,"div",15),p(1,"img",16),r(2,"div",17)(3,"button",18),_("click",function(){u(e);let m=s();return f(m.removeImage())}),b(),r(4,"svg",19),p(5,"path",20)(6,"path",21),n(),c(7," Eliminar "),n(),y(),r(8,"button",22),_("click",function(){u(e);let m=s();return f(m.fileInput.nativeElement.click())}),b(),r(9,"svg",19),p(10,"path",23),n(),c(11," Cambiar "),n()()()}if(i&2){let e=s();a(),l("src",e.imagePreview,N)}}function xe(i,t){if(i&1&&(r(0,"div",24),c(1),n()),i&2){let e=s();a(),C(" ",e.error," ")}}var O=class i{existingImageUrl;imageSelected=new k;imageRemoved=new k;fileInput;imagePreview=null;isDraggingOver=!1;error=null;selectedFile=null;MAX_FILE_SIZE=5*1024*1024;ALLOWED_TYPES=["image/jpeg","image/png","image/gif","image/webp"];ngOnInit(){this.existingImageUrl&&(this.imagePreview=this.existingImageUrl)}ngOnChanges(){this.existingImageUrl&&(this.imagePreview=this.existingImageUrl)}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDraggingOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDraggingOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDraggingOver=!1,t.dataTransfer?.files&&t.dataTransfer.files.length>0&&this.processFile(t.dataTransfer.files[0])}onFileSelected(t){let e=t.target;e.files&&e.files.length>0&&this.processFile(e.files[0])}removeImage(){this.imagePreview=null,this.selectedFile=null,this.error=null,this.imageRemoved.emit(),this.fileInput&&(this.fileInput.nativeElement.value="")}processFile(t){if(this.error=null,!this.ALLOWED_TYPES.includes(t.type)){this.error="Formato no v\xE1lido. Por favor, selecciona una imagen (JPEG, PNG, GIF o WebP).";return}if(t.size>this.MAX_FILE_SIZE){this.error="La imagen es demasiado grande. El tama\xF1o m\xE1ximo permitido es 5MB.";return}let e=new FileReader;e.onload=o=>{this.imagePreview=o.target?.result},e.readAsDataURL(t),this.selectedFile=t,this.imageSelected.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=F({type:i,selectors:[["app-image-upload"]],viewQuery:function(e,o){if(e&1&&D(fe,5),e&2){let m;U(m=L())&&(o.fileInput=m.first)}},inputs:{existingImageUrl:"existingImageUrl"},outputs:{imageSelected:"imageSelected",imageRemoved:"imageRemoved"},features:[B],decls:4,vars:7,consts:[["fileInput",""],[1,"image-upload-container",3,"dragover","dragleave","drop"],["class","upload-placeholder",4,"ngIf"],["class","image-preview-container",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"upload-placeholder"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"],["x1","16","y1","5","x2","22","y2","5"],["x1","19","y1","2","x2","19","y2","8"],["cx","9","cy","9","r","2"],["d","m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"],[1,"upload-text"],["type","button",1,"select-button",3,"click"],["type","file","accept","image/*",1,"file-input",3,"change"],[1,"image-preview-container"],["alt","Vista previa de imagen",1,"image-preview",3,"src"],[1,"image-actions"],["type","button",1,"remove-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M18 6L6 18"],["d","M6 6l12 12"],["type","button",1,"change-button",3,"click"],["d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"],[1,"error-message"]],template:function(e,o){e&1&&(r(0,"div",1),_("dragover",function(g){return o.onDragOver(g)})("dragleave",function(g){return o.onDragLeave(g)})("drop",function(g){return o.onDrop(g)}),d(1,_e,16,1,"div",2)(2,ve,12,1,"div",3)(3,xe,2,1,"div",4),n()),e&2&&(v("has-image",o.imagePreview)("dragover",o.isDraggingOver),a(),l("ngIf",!o.imagePreview),a(),l("ngIf",o.imagePreview),a(),l("ngIf",o.error))},dependencies:[P,w],styles:[".image-upload-container[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:8px;padding:24px;text-align:center;background-color:#f9f9f9;transition:all .3s ease;position:relative;min-height:200px;display:flex;flex-direction:column;justify-content:center;align-items:center}.image-upload-container.dragover[_ngcontent-%COMP%]{border-color:#00b359;background-color:#00b3590d}.image-upload-container.has-image[_ngcontent-%COMP%]{border-style:solid;background-color:#fff}.upload-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#666}.upload-placeholder[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#888;margin-bottom:16px}.upload-text[_ngcontent-%COMP%]{margin-bottom:16px;font-size:1rem}.upload-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:8px 0;font-size:.9rem;color:#888}.select-button[_ngcontent-%COMP%]{background-color:#00b359;color:#fff;border:none;border-radius:4px;padding:8px 16px;cursor:pointer;font-weight:500;transition:background-color .3s ease}.select-button[_ngcontent-%COMP%]:hover{background-color:#009649}.file-input[_ngcontent-%COMP%]{display:none}.image-preview-container[_ngcontent-%COMP%]{width:100%;position:relative}.image-preview[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border-radius:4px;object-fit:contain}.image-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-top:16px}.remove-button[_ngcontent-%COMP%], .change-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:.9rem;transition:all .2s ease}.remove-button[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.change-button[_ngcontent-%COMP%]{background-color:#e2f3ff;color:#0c5460;border:1px solid #bee5eb}.remove-button[_ngcontent-%COMP%]:hover{background-color:#f1b0b7}.change-button[_ngcontent-%COMP%]:hover{background-color:#d1ecf1}.error-message[_ngcontent-%COMP%]{margin-top:8px;color:#dc3545;font-size:.9rem}"]})};var de=()=>["/bitacoras"];function be(i,t){if(i&1&&(r(0,"div",9),p(1,"div",10),r(2,"p"),c(3),n()()),i&2){let e=s();a(3),E(e.isEditMode?"Cargando bit\xE1cora...":"Preparando formulario...")}}function he(i,t){if(i&1){let e=h();r(0,"button",17),_("click",function(){u(e);let m=s(2);return f(m.loadBitacora())}),c(1,"Reintentar"),n()}}function Ce(i,t){if(i&1&&(r(0,"div",11),b(),r(1,"svg",12),p(2,"circle",13)(3,"line",14)(4,"line",15),n(),y(),r(5,"p"),c(6),n(),d(7,he,2,0,"button",16),n()),i&2){let e=s();a(6),E(e.error),a(),l("ngIf",e.isEditMode)}}function Ie(i,t){i&1&&(r(0,"div"),c(1,"El t\xEDtulo es obligatorio"),n())}function ye(i,t){i&1&&(r(0,"div"),c(1,"El t\xEDtulo no puede exceder los 100 caracteres"),n())}function Se(i,t){if(i&1&&(r(0,"div",42),d(1,Ie,2,0,"div",43)(2,ye,2,0,"div",43),n()),i&2){let e=s(2);a(),l("ngIf",e.f.titulo.errors.required),a(),l("ngIf",e.f.titulo.errors.maxlength)}}function Ee(i,t){i&1&&(r(0,"div"),c(1,"La fecha es obligatoria"),n())}function Fe(i,t){if(i&1&&(r(0,"div",42),d(1,Ee,2,0,"div",43),n()),i&2){let e=s(2);a(),l("ngIf",e.f.fecha.errors.required)}}function we(i,t){if(i&1&&(r(0,"option",44),c(1),n()),i&2){let e=t.$implicit;l("value",e[0]),a(),E(e[1])}}function Pe(i,t){i&1&&(r(0,"div"),c(1,"La categor\xEDa es obligatoria"),n())}function Oe(i,t){if(i&1&&(r(0,"div",42),d(1,Pe,2,0,"div",43),n()),i&2){let e=s(2);a(),l("ngIf",e.f.categoria.errors.required)}}function Me(i,t){i&1&&(r(0,"span",23),c(1,"*"),n())}function ke(i,t){if(i&1&&p(0,"input",54),i&2){let e=s().$implicit,o=s(3);v("is-invalid",o.isSubmitted&&o.camposAdicionales[e.nombre]&&o.camposAdicionales[e.nombre].errors),l("type","text")("id",e.nombre)("formControlName",e.nombre)("placeholder",e.placeholder||"")}}function Ae(i,t){if(i&1&&p(0,"input",55),i&2){let e=s().$implicit,o=s(3);v("is-invalid",o.isSubmitted&&o.camposAdicionales[e.nombre]&&o.camposAdicionales[e.nombre].errors),l("id",e.nombre)("formControlName",e.nombre)}}function Te(i,t){if(i&1&&p(0,"input",56),i&2){let e=s().$implicit,o=s(3);v("is-invalid",o.isSubmitted&&o.camposAdicionales[e.nombre]&&o.camposAdicionales[e.nombre].errors),l("id",e.nombre)("formControlName",e.nombre)}}function Be(i,t){if(i&1&&(r(0,"option",44),c(1),n()),i&2){let e=t.$implicit;l("value",e),a(),E(e)}}function Ne(i,t){if(i&1&&(r(0,"select",57)(1,"option",32),c(2,"Seleccionar"),n(),d(3,Be,2,2,"option",33),n()),i&2){let e=s().$implicit,o=s(3);v("is-invalid",o.isSubmitted&&o.camposAdicionales[e.nombre]&&o.camposAdicionales[e.nombre].errors),l("id",e.nombre)("formControlName",e.nombre),a(3),l("ngForOf",e.opciones)}}function Ve(i,t){i&1&&(r(0,"div"),c(1," Este campo es obligatorio "),n())}function De(i,t){i&1&&(r(0,"div"),c(1," Este campo debe contener un n\xFAmero "),n())}function Ue(i,t){i&1&&(r(0,"div"),c(1," Este campo debe contener un n\xFAmero entero (sin decimales) "),n())}function Le(i,t){i&1&&(r(0,"div"),c(1," Este campo debe contener un n\xFAmero positivo mayor que cero "),n())}function Ge(i,t){if(i&1&&(r(0,"div",42),d(1,Ve,2,0,"div",43)(2,De,2,0,"div",43)(3,Ue,2,0,"div",43)(4,Le,2,0,"div",43),n()),i&2){let e=s().$implicit,o=s(3);a(),l("ngIf",o.camposAdicionales[e.nombre].errors&&o.camposAdicionales[e.nombre].hasError("required")),a(),l("ngIf",o.camposAdicionales[e.nombre].errors&&o.camposAdicionales[e.nombre].hasError("notNumber")),a(),l("ngIf",o.camposAdicionales[e.nombre].errors&&o.camposAdicionales[e.nombre].hasError("notInteger")),a(),l("ngIf",o.camposAdicionales[e.nombre].errors&&o.camposAdicionales[e.nombre].hasError("notPositive"))}}function Re(i,t){if(i&1&&(r(0,"div",47)(1,"label",48),c(2),d(3,Me,2,0,"span",49),n(),d(4,ke,1,6,"input",50)(5,Ae,1,4,"input",51)(6,Te,1,4,"input",52)(7,Ne,4,5,"select",53)(8,Ge,5,4,"div",25),n()),i&2){let e=t.$implicit,o=s(3);l("formGroupName","camposAdicionales"),a(),l("for",e.nombre),a(),C(" ",e.etiqueta," "),a(),l("ngIf",e.requerido),a(),l("ngIf",e.tipo==="texto"),a(),l("ngIf",e.tipo==="numero"),a(),l("ngIf",e.tipo==="fecha"),a(),l("ngIf",e.tipo==="seleccion"),a(),l("ngIf",o.isSubmitted&&o.camposAdicionales&&o.camposAdicionales[e.nombre]&&o.camposAdicionales[e.nombre].errors)}}function qe(i,t){if(i&1&&(r(0,"div",45)(1,"h3"),c(2,"Informaci\xF3n adicional"),n(),d(3,Re,9,9,"div",46),n()),i&2){let e=s(2);a(3),l("ngForOf",e.selectedCamposAdicionales)}}function je(i,t){i&1&&(b(),r(0,"svg",3),p(1,"path",58)(2,"polyline",59)(3,"polyline",60),n())}function ze(i,t){i&1&&p(0,"span",61)}function $e(i,t){if(i&1){let e=h();r(0,"form",18),_("ngSubmit",function(){u(e);let m=s();return f(m.onSubmit())}),r(1,"div",19)(2,"div",20)(3,"div",21)(4,"label",22),c(5,"T\xEDtulo "),r(6,"span",23),c(7,"*"),n()(),p(8,"input",24),d(9,Se,3,2,"div",25),n(),r(10,"div",21)(11,"label",26),c(12,"Descripci\xF3n"),n(),p(13,"textarea",27),n(),r(14,"div",21)(15,"label",28),c(16,"Fecha "),r(17,"span",23),c(18,"*"),n()(),p(19,"input",29),d(20,Fe,2,1,"div",25),n(),r(21,"div",21)(22,"label",30),c(23,"Categor\xEDa "),r(24,"span",23),c(25,"*"),n()(),r(26,"select",31),_("change",function(){u(e);let m=s();return f(m.onCategoriaChange())}),r(27,"option",32),c(28,"Seleccionar categor\xEDa"),n(),d(29,we,2,2,"option",33),n(),d(30,Oe,2,1,"div",25),n()(),r(31,"div",20)(32,"div",21)(33,"label",34),c(34,"Imagen"),n(),r(35,"app-image-upload",35),_("imageSelected",function(m){u(e);let g=s();return f(g.onImageSelected(m))})("imageRemoved",function(){u(e);let m=s();return f(m.onImageRemoved())}),n()(),d(36,qe,4,1,"div",36),n()(),r(37,"div",37)(38,"button",38),c(39,"Cancelar"),n(),r(40,"button",39),d(41,je,4,0,"svg",40)(42,ze,1,0,"span",41),c(43),n()()()}if(i&2){let e,o=s();l("formGroup",o.bitacoraForm),a(8),v("is-invalid",o.isSubmitted&&o.f.titulo.errors),a(),l("ngIf",o.isSubmitted&&o.f.titulo.errors),a(10),v("is-invalid",o.isSubmitted&&o.f.fecha.errors),a(),l("ngIf",o.isSubmitted&&o.f.fecha.errors),a(6),v("is-invalid",o.isSubmitted&&o.f.categoria.errors),a(3),l("ngForOf",o.categoriaEntries),a(),l("ngIf",o.isSubmitted&&o.f.categoria.errors),a(5),l("existingImageUrl",(e=o.existingImageUrl)!==null&&e!==void 0?e:void 0),a(),l("ngIf",o.selectedCamposAdicionales.length>0),a(2),l("routerLink",A(18,de)),a(2),l("disabled",o.submitting),a(),l("ngIf",!o.submitting),a(),l("ngIf",o.submitting),a(),C(" ",o.submitting?"Guardando...":"Guardar"," ")}}function He(){return i=>{if(i.value===null||i.value===void 0||i.value==="")return{required:!0};let t=Number(i.value);return isNaN(t)?{notNumber:!0}:Number.isInteger(t)?t<=0?{notPositive:!0}:null:{notInteger:!0}}}function Qe(){return i=>{if(i.value===null||i.value===void 0||i.value==="")return{required:!0};let t=Number(i.value);return isNaN(t)?{notNumber:!0}:t<=0?{notPositive:!0}:null}}var se=class i{constructor(t,e,o,m){this.fb=t;this.bitacoraService=e;this.router=o;this.route=m}bitacoraForm=null;loading=!1;submitting=!1;error=null;isSubmitted=!1;isEditMode=!1;bitacoraId;selectedImage=null;existingImageUrl=null;selectedCamposAdicionales=[];categoriasConDecimales=["reciclaje","limpieza_ambiental","limpieza-ambiental","limpieza","limpieza ambiental"];categoriaEntries=Object.entries(ce);ngOnInit(){this.bitacoraId=+this.route.snapshot.paramMap.get("id"),this.isEditMode=!isNaN(this.bitacoraId)&&this.bitacoraId>0,this.isEditMode?this.loadBitacora():this.initForm()}get f(){return this.bitacoraForm?.controls??{}}get camposAdicionales(){let t=this.f.camposAdicionales;return t instanceof X?t.controls:{}}loadBitacora(){this.loading=!0,this.error=null,this.bitacoraService.getBitacoraById(this.bitacoraId).pipe(M(()=>this.loading=!1)).subscribe({next:t=>{this.initForm(t),t.imagenUrl&&(this.existingImageUrl=this.bitacoraService.getImageUrl(t.imagenUrl)),this.updateAdditionalFields(t.categoria,t.camposAdicionales)},error:t=>{this.error=t.message||"Error al cargar la bit\xE1cora"}})}initForm(t){let o=new Date().toISOString().split("T")[0];this.bitacoraForm=this.fb.group({titulo:[t?.titulo||"",[I.required,I.maxLength(100)]],descripcion:[t?.descripcion||""],fecha:[t?.fecha?new Date(t.fecha).toISOString().split("T")[0]:o,I.required],categoria:[t?.categoria||"",I.required],camposAdicionales:this.fb.group({})}),t?.categoria&&this.updateAdditionalFields(t.categoria,t.camposAdicionales)}onCategoriaChange(){let t=this.f.categoria?.value;if(console.log("Categor\xEDa seleccionada:",t),console.log("\xBFPermite decimales?",this.categoriasConDecimales.includes(t)),t)this.updateAdditionalFields(t);else{this.selectedCamposAdicionales=[];let e=this.bitacoraForm?.get("camposAdicionales");e&&Object.keys(e.controls).forEach(o=>{e.removeControl(o)})}}updateAdditionalFields(t,e){this.selectedCamposAdicionales=le[t]||[],console.log("Actualizando campos para categor\xEDa:",t),console.log("\xBFPermite decimales?",this.categoriasConDecimales.includes(t));let o=this.bitacoraForm?.get("camposAdicionales");o&&(Object.keys(o.controls).forEach(m=>{o.removeControl(m)}),this.selectedCamposAdicionales.forEach(m=>{let g=e?.[m.nombre]||"",x=[];m.tipo==="numero"?(console.log("Campo num\xE9rico encontrado:",m.nombre),this.categoriasConDecimales.includes(t)?(console.log("Aplicando validador de decimales para:",m.nombre),x.push(Qe())):(console.log("Aplicando validador de enteros para:",m.nombre),x.push(He()))):m.requerido&&x.push(I.required),o.addControl(m.nombre,new Y(g,x))}))}onImageSelected(t){this.selectedImage=t}onImageRemoved(){this.selectedImage=null,this.existingImageUrl=null}onSubmit(){if(this.isSubmitted=!0,this.bitacoraForm?.invalid){let x=document.querySelectorAll(".is-invalid");x.length>0&&x[0].scrollIntoView({behavior:"smooth",block:"center"});return}this.submitting=!0,this.error=null;let t=this.bitacoraForm.value,o=new Date(t.fecha).toISOString().split("T")[0]+"T00:00:00",m={titulo:t.titulo,descripcion:t.descripcion,fecha:new Date(t.fecha),categoria:t.categoria,camposAdicionales:t.camposAdicionales};(this.isEditMode?this.bitacoraService.updateBitacora(this.bitacoraId,m,this.selectedImage||void 0,o):this.bitacoraService.createBitacora(m,this.selectedImage||void 0,o)).pipe(M(()=>this.submitting=!1)).subscribe({next:()=>{this.router.navigate(["/bitacoras"])},error:x=>{this.error=x.message||`Error al ${this.isEditMode?"actualizar":"crear"} la bit\xE1cora`,setTimeout(()=>{let T=document.querySelector(".error-message");T&&T.scrollIntoView({behavior:"smooth",block:"center"})},100)}})}static \u0275fac=function(e){return new(e||i)(S(re),S(me),S(j),S(q))};static \u0275cmp=F({type:i,selectors:[["app-bitacora-form"]],decls:13,vars:6,consts:[[1,"container"],[1,"page-header"],[1,"btn-back",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","19","y1","12","x2","5","y2","12"],["points","12 19 5 12 12 5"],["class","loading-container",4,"ngIf"],["class","error-message",4,"ngIf"],["class","bitacora-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-message"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["class","btn-retry",3,"click",4,"ngIf"],[1,"btn-retry",3,"click"],[1,"bitacora-form",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-column"],[1,"form-group"],["for","titulo",1,"form-label"],[1,"required"],["type","text","id","titulo","formControlName","titulo",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","descripcion",1,"form-label"],["id","descripcion","formControlName","descripcion","rows","4",1,"form-control"],["for","fecha",1,"form-label"],["type","date","id","fecha","formControlName","fecha",1,"form-control"],["for","categoria",1,"form-label"],["id","categoria","formControlName","categoria",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-label"],[3,"imageSelected","imageRemoved","existingImageUrl"],["class","additional-fields",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn-cancel",3,"routerLink"],["type","submit",1,"btn-save",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["class","loading-spinner-small",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],[1,"additional-fields"],["class","form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"form-group",3,"formGroupName"],[1,"form-label",3,"for"],["class","required",4,"ngIf"],["class","form-control",3,"type","id","formControlName","placeholder","is-invalid",4,"ngIf"],["type","number","class","form-control",3,"id","formControlName","is-invalid",4,"ngIf"],["type","date","class","form-control",3,"id","formControlName","is-invalid",4,"ngIf"],["class","form-control",3,"id","formControlName","is-invalid",4,"ngIf"],[1,"form-control",3,"type","id","formControlName","placeholder"],["type","number",1,"form-control",3,"id","formControlName"],["type","date",1,"form-control",3,"id","formControlName"],[1,"form-control",3,"id","formControlName"],["d","M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"],["points","17 21 17 13 7 13 7 21"],["points","7 3 7 8 15 8"],[1,"loading-spinner-small"]],template:function(e,o){e&1&&(p(0,"app-navbar"),r(1,"div",0)(2,"div",1)(3,"h2"),c(4),n(),r(5,"a",2),b(),r(6,"svg",3),p(7,"line",4)(8,"polyline",5),n(),c(9," Volver "),n()(),d(10,be,4,1,"div",6)(11,Ce,8,2,"div",7)(12,$e,44,19,"form",8),n()),e&2&&(a(4),C("",o.isEditMode?"Editar":"Crear"," Bit\xE1cora"),a(),l("routerLink",A(5,de)),a(5),l("ngIf",o.loading),a(),l("ngIf",o.error),a(),l("ngIf",!o.loading&&o.bitacoraForm))},dependencies:[P,R,w,ae,Z,oe,ne,H,J,ie,Q,W,K,te,ee,z,$,O],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#00b359;margin:0}.btn-back[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;background-color:#f5f5f5;color:#333;border-radius:4px;text-decoration:none;transition:background-color .3s ease}.btn-back[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 0}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(0,179,89,.2);border-radius:50%;border-top-color:#00b359;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}.loading-spinner-small[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;padding:16px;margin-bottom:24px;color:#721c24;display:flex;align-items:center;gap:12px}.btn-retry[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;border-radius:4px;padding:6px 12px;cursor:pointer;margin-left:auto}.bitacora-form[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:24px;box-shadow:0 2px 8px #0000001a}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#333}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ced4da;border-radius:4px;font-size:1rem;transition:border-color .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#00b359;outline:none}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:4px}.additional-fields[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #eee}.additional-fields[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:16px;color:#333}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:24px;padding-top:16px;border-top:1px solid #eee}.btn-cancel[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{padding:10px 20px;border-radius:4px;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px}.btn-cancel[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #dee2e6;color:#212529;text-decoration:none}.btn-save[_ngcontent-%COMP%]{background-color:#00b359;border:1px solid #00b359;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#e2e6ea}.btn-save[_ngcontent-%COMP%]:hover{background-color:#009649}.btn-save[_ngcontent-%COMP%]:disabled{background-color:#6acf9a;border-color:#6acf9a;cursor:not-allowed}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{se as BitacoraFormComponent};
