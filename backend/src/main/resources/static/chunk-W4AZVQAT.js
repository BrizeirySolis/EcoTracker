import{Ba as l,Ha as u,Na as m,Oa as d,a as i,b as a,i as p,j as o,l as r,r as c,u as s}from"./chunk-VNDPJNBL.js";var h=class n{constructor(t,e,g){this.http=t;this.authService=e;this.router=g}API_URL=m.apiUrl;handleError(t){return console.error("Error en la solicitud HTTP:",t),t.status===401&&(console.log("Error de autenticaci\xF3n. Redirigiendo al login..."),this.authService.logout(),this.router.navigate(["/login"],{queryParams:{returnUrl:this.router.url,authError:"Tu sesi\xF3n ha expirado o no es v\xE1lida. Por favor, inicia sesi\xF3n nuevamente."}})),p(()=>t)}getConsumptionSummary(){return this.http.get(`${this.API_URL}/summary`).pipe(r(this.handleError.bind(this)))}saveElectricityConsumption(t){return this.http.post(`${this.API_URL}/electricity`,t).pipe(r(this.handleError.bind(this)))}getElectricityConsumption(){return this.http.get(`${this.API_URL}/electricity`).pipe(o(t=>t.map(e=>a(i({},e),{date:new Date(e.date)}))),r(this.handleError.bind(this)))}saveWaterConsumption(t){return this.http.post(`${this.API_URL}/water`,t).pipe(r(this.handleError.bind(this)))}getWaterConsumption(){return this.http.get(`${this.API_URL}/water`).pipe(o(t=>t.map(e=>a(i({},e),{date:new Date(e.date)}))),r(this.handleError.bind(this)))}saveTransportUsage(t){return this.http.post(`${this.API_URL}/transport`,t).pipe(r(this.handleError.bind(this)))}getTransportUsage(){return this.http.get(`${this.API_URL}/transport`).pipe(o(t=>t.map(e=>a(i({},e),{date:new Date(e.date)}))),r(this.handleError.bind(this)))}getMockWaterData(){return[{id:1,liters:5.2,date:new Date(2025,2,10),cost:120},{id:2,liters:8,date:new Date(2025,2,17),cost:190},{id:3,liters:6.1,date:new Date(2025,2,24),cost:135},{id:4,liters:7.2,date:new Date(2025,3,1),cost:150},{id:5,liters:4,date:new Date(2025,3,8),cost:100}]}getMockElectricityData(){return[{id:1,kilowatts:120,date:new Date(2025,2,10),cost:240},{id:2,kilowatts:150,date:new Date(2025,2,17),cost:300},{id:3,kilowatts:130,date:new Date(2025,2,24),cost:260},{id:4,kilowatts:140,date:new Date(2025,3,1),cost:280},{id:5,kilowatts:110,date:new Date(2025,3,8),cost:220}]}getMockTransportData(){return[{id:1,kilometers:20,transportType:"car",date:new Date(2025,2,10),cost:50},{id:2,kilometers:15,transportType:"bus",date:new Date(2025,2,17),cost:30},{id:3,kilometers:25,transportType:"car",date:new Date(2025,2,24),cost:60},{id:4,kilometers:18,transportType:"car",date:new Date(2025,3,1),cost:45},{id:5,kilometers:12,transportType:"bicycle",date:new Date(2025,3,8),cost:0}]}getMockSummaryData(){return[{label:"Agua",value:100,percentage:30},{label:"Electricidad",value:150,percentage:45},{label:"Transporte",value:80,percentage:25}]}static \u0275fac=function(e){return new(e||n)(s(l),s(d),s(u))};static \u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})};export{h as a};
