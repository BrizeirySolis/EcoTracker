import{a as O,c as S,h as k,r as q,t as I}from"./chunk-GY7LFIWC.js";import{Ca as M,G as a,I as d,Ia as w,J as b,Ka as P,La as R,N as v,Q as g,Ra as y,T as t,U as n,Z as C,_,da as o,fa as c,ha as u,ia as m,ja as p,n as h,za as x}from"./chunk-4HKD5D5B.js";function E(l,s){if(l&1&&(t(0,"div",12),o(1),n()),l&2){let i=_();a(),c(" ",i.error," ")}}var L=class l{constructor(s,i,e){this.authService=s;this.router=i;this.route=e}loginRequest={username:"",password:""};loading=!1;error="";returnUrl="/home";ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/home",this.authService.isLoggedIn()&&this.router.navigate(["/home"])}login(){if(this.loading=!0,this.error="",!this.loginRequest.username||!this.loginRequest.password){this.error="Por favor, completa todos los campos",this.loading=!1;return}this.authService.login(this.loginRequest).pipe(h()).subscribe({next:()=>{this.router.navigate([this.returnUrl])},error:s=>{this.error=s.error?.message||"Error al iniciar sesi\xF3n. Verifica tus credenciales.",this.loading=!1},complete:()=>{this.loading=!1}})}static \u0275fac=function(i){return new(i||l)(d(y),d(P),d(w))};static \u0275cmp=b({type:l,selectors:[["app-login"]],decls:20,vars:5,consts:[[1,"login-container"],[1,"login-form"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"button-group"],[1,"btn-login",3,"click","disabled"],[1,"register-link"],["routerLink","/register"],[1,"alert","alert-danger"]],template:function(i,e){i&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Iniciar Sesi\xF3n"),n(),v(4,E,2,1,"div",2),t(5,"div",3)(6,"label",4),o(7,"Usuario"),n(),t(8,"input",5),p("ngModelChange",function(r){return m(e.loginRequest.username,r)||(e.loginRequest.username=r),r}),n()(),t(9,"div",3)(10,"label",6),o(11,"Contrase\xF1a"),n(),t(12,"input",7),p("ngModelChange",function(r){return m(e.loginRequest.password,r)||(e.loginRequest.password=r),r}),n()(),t(13,"div",8)(14,"button",9),C("click",function(){return e.login()}),o(15),n()(),t(16,"div",10),o(17," \xBFNo tienes cuenta? "),t(18,"a",11),o(19,"Reg\xEDstrate aqu\xED"),n()()()()),i&2&&(a(4),g("ngIf",e.error),a(4),u("ngModel",e.loginRequest.username),a(4),u("ngModel",e.loginRequest.password),a(2),g("disabled",e.loading),a(),c(" ",e.loading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," "))},dependencies:[M,x,I,O,S,q,k,R],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.login-form[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:30px;width:100%;max-width:450px;box-shadow:0 4px 8px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#00b359}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;background-color:#fff;font-size:1rem}.button-group[_ngcontent-%COMP%]{margin-top:30px}.btn-login[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:6px;background-color:#00b359;color:#fff;font-weight:700;cursor:pointer;transition:background-color .3s}.btn-login[_ngcontent-%COMP%]:hover{background-color:#00833c}.btn-login[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.register-link[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00b359;text-decoration:none;font-weight:700}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.alert[_ngcontent-%COMP%]{padding:12px;margin-bottom:20px;border-radius:6px}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}"]})};export{L as LoginComponent};
