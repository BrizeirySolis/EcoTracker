import{b as w}from"./chunk-EENQT4EC.js";import{$ as t,$a as P,A as u,B as m,Ia as O,L as a,N as b,O as C,Pa as S,S as l,V as s,_ as n,_a as k,ba as h,ca as M,d as x,da as g,ea as f,fa as p,la as o,m as _,ma as v}from"./chunk-HBL3S35I.js";function y(i,e){i&1&&(n(0,"li")(1,"a",8),o(2,"H\xE1bitos"),t()())}function L(i,e){i&1&&(n(0,"li")(1,"a",9),o(2,"Bitacoras"),t()())}function E(i,e){i&1&&(n(0,"li")(1,"a",10),o(2,"Metas"),t()())}function U(i,e){i&1&&(n(0,"li")(1,"a",11),o(2,"Eduacaci\xF3n"),t()())}function N(i,e){i&1&&(h(0),n(1,"a",12),o(2,"Iniciar sesi\xF3n"),t(),n(3,"a",13),o(4,"Registrarse"),t(),M())}function T(i,e){if(i&1){let r=g();n(0,"div",22)(1,"a",23),o(2,"Mi Perfil"),t(),n(3,"a",24),f("click",function(){u(r);let d=p(2);return m(d.logout())}),o(4,"Cerrar Sesi\xF3n"),t()()}}function A(i,e){if(i&1){let r=g();n(0,"div",14)(1,"div",15)(2,"span",16),o(3,"\u2B50"),t(),n(4,"span",17),o(5),t(),n(6,"span",18),o(7,"pts"),t()(),n(8,"div",19),f("click",function(){u(r);let d=p();return m(d.toggleUserMenu())}),n(9,"span"),o(10),t(),n(11,"span",20),o(12,"\u25BC"),t()(),l(13,T,5,0,"div",21),t()}if(i&2){let r=p();a(5),v(r.userScore),a(5),v(r.currentUser==null?null:r.currentUser.name),a(3),s("ngIf",r.showUserMenu)}}var I=class i{constructor(e){this.authService=e}isLoggedIn=!1;currentUser=null;showUserMenu=!1;userScore=0;subscriptions=new x;ngOnInit(){this.subscriptions.add(this.authService.currentUser.subscribe(e=>{this.currentUser=e,this.isLoggedIn=!!e,this.userScore=e?.puntuacion||0,e&&this.updateUserScore()})),this.subscriptions.add(_(3e4).subscribe(()=>{this.isLoggedIn&&this.updateUserScore()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}updateUserScore(){this.authService.getUserScore().subscribe({next:e=>{this.userScore=e.puntuacion,this.authService.updateUserScore(e.puntuacion)},error:e=>{console.error("Error al obtener puntuaci\xF3n:",e)}})}toggleUserMenu(){this.showUserMenu=!this.showUserMenu}logout(){this.authService.logout(),window.location.href="/home"}static \u0275fac=function(r){return new(r||i)(b(w))};static \u0275cmp=C({type:i,selectors:[["app-navbar"]],decls:15,vars:6,consts:[[1,"navbar"],[1,"brand"],["routerLink","/home"],[1,"nav-items"],["routerLink","/home","routerLinkActive","active"],[4,"ngIf"],[1,"auth-section"],["class","user-menu",4,"ngIf"],["routerLink","/habitos","routerLinkActive","active"],["routerLink","/bitacoras","routerLinkActive","active"],["routerLink","/metas","routerLinkActive","active"],["routerLink","/educacion","routerLinkActive","active"],["routerLink","/login",1,"auth-link"],["routerLink","/register",1,"auth-link","register"],[1,"user-menu"],[1,"user-score"],[1,"score-icon"],[1,"score-value"],[1,"score-label"],[1,"user-info",3,"click"],[1,"dropdown-icon"],["class","dropdown-menu",4,"ngIf"],[1,"dropdown-menu"],["routerLink","/profile"],[1,"logout-link",3,"click"]],template:function(r,c){r&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),o(3,"EcoTracker"),t()(),n(4,"ul",3)(5,"li")(6,"a",4),o(7,"Home"),t()(),l(8,y,3,0,"li",5)(9,L,3,0,"li",5)(10,E,3,0,"li",5)(11,U,3,0,"li",5),t(),n(12,"div",6),l(13,N,5,0,"ng-container",5)(14,A,14,3,"div",7),t()()),r&2&&(a(8),s("ngIf",c.isLoggedIn),a(),s("ngIf",c.isLoggedIn),a(),s("ngIf",c.isLoggedIn),a(),s("ngIf",c.isLoggedIn),a(2),s("ngIf",!c.isLoggedIn),a(),s("ngIf",c.isLoggedIn))},dependencies:[k,P,S,O],styles:[".navbar[_ngcontent-%COMP%]{background-color:#00b359;padding:16px;color:#fff;display:flex;justify-content:space-between;align-items:center}.brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.nav-items[_ngcontent-%COMP%]{display:flex;list-style-type:none;margin:0;padding:0}.nav-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:24px}.nav-items[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:700;font-size:1.2rem}.active[_ngcontent-%COMP%]{text-decoration:underline!important}.auth-section[_ngcontent-%COMP%]{display:flex;align-items:center}.auth-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin-left:20px;font-weight:700;padding:8px 16px}.auth-link.register[_ngcontent-%COMP%]{background-color:#fff;color:#00b359;border-radius:20px}.user-menu[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:16px}.user-score[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#ffffff26;padding:6px 12px;border-radius:16px;font-weight:700;gap:4px}.score-icon[_ngcontent-%COMP%]{font-size:1.2rem}.score-value[_ngcontent-%COMP%]{font-size:1.1rem;color:gold}.score-label[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;padding:8px 16px;background-color:#fff3;border-radius:20px}.dropdown-icon[_ngcontent-%COMP%]{margin-left:8px;font-size:.8rem}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:100%;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;min-width:150px;z-index:100;margin-top:8px}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:12px 16px;color:#333;text-decoration:none;transition:background-color .3s}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.logout-link[_ngcontent-%COMP%]{color:#e53935!important;border-top:1px solid #eee;cursor:pointer}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.nav-items[_ngcontent-%COMP%]{margin-top:16px;width:100%;flex-wrap:wrap}.nav-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.auth-section[_ngcontent-%COMP%]{margin-top:16px;width:100%;justify-content:flex-end}.user-menu[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}"]})};export{I as a};
